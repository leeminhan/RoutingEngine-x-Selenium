package ESCSeleniumTesting;

//WebDriver Class is needed to instantiate a browser with a specific driver
import org.openqa.selenium.*;
//ChromeDriver is attached to Webdriver to instantitate a chrome browser
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.remote.*;
import java.net.*;
import java.util.concurrent.TimeUnit;
import java.lang.*;

public class MessageUC_Test {
	public static void main(String[] args) {
	
		System.setProperty("webdriver.chrome.driver", "C:/Users/xavierrocker/Downloads/chromedriver_win322/chromedriver.exe");
		WebDriver driver = new ChromeDriver();
		driver.manage().timeouts().implicitlyWait(15, TimeUnit.SECONDS);
		
	    // launch Chrome and direct it to the Base URL
		driver.get("http://192.168.56.1:3000/");
	    WebElement msgBut = driver.findElement(By.xpath("//div[@id='sc-launcher']/div/img[2]"));
	    WebElement textField = driver.findElement(By.xpath("//div[@id='sc-launcher']/div[2]/form/div"));
	    
	    String firster = "Hello";
	    String seconder = "I have a query";
	    
	    msgBut.click();
	    try {
			Thread.sleep(2000);
		} catch (InterruptedException e2) {
			// TODO Auto-generated catch block
			e2.printStackTrace();
		}
	    WebElement sendBut = driver.findElement(By.cssSelector("sc-user-input--send-icon"));
	    WebElement firstMsg = driver.findElement(By.xpath("//div[@id='sc-launcher']/div[2]/div[2]/div/div/div[2]"));
	    WebElement secMsg = driver.findElement(By.xpath("//div[@id='sc-launcher']/div[2]/div[2]/div[2]/div/div[2]"));
	    textField.click();
	    textField.sendKeys("Hello");
	    try {
			Thread.sleep(2000);
		} catch (InterruptedException e2) {
			// TODO Auto-generated catch block
			e2.printStackTrace();
		}
	    sendBut.click();
	    try {
			Thread.sleep(2000);
		} catch (InterruptedException e2) {
			// TODO Auto-generated catch block
			e2.printStackTrace();
		}
	    textField.sendKeys("I have a query");
	    try {
			Thread.sleep(2000);
		} catch (InterruptedException e2) {
			// TODO Auto-generated catch block
			e2.printStackTrace();
		}
	    sendBut.click();
	    try {
			Thread.sleep(2000);
		} catch (InterruptedException e2) {
			// TODO Auto-generated catch block
			e2.printStackTrace();
		}
	    if(firstMsg.getText().contentEquals(firster) && secMsg.getText().contentEquals(seconder)) {
	    	System.out.println("Test 1: Check sending valid message works, Passed!");
	    }else {
	    	System.out.println("Test 1 Failed");
	    }
	}

}
